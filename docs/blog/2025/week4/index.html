<!DOCTYPE html>
<html lang="en">

<!-- Head -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <!-- Metadata, OpenGraph and Schema.org -->


  <!-- Standard metadata -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Week 4: June 23 ~ June 30 | Nikhil Gupta | JdeRobot x GSoC2025</title>
  <meta name="author" content="JdeRobot x Google Summer of Code 2025">
  <meta name="description" content="Fourth week of coding period; Working on autoparking migration">
  <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website">


  <!-- Bootstrap & MDB -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css"
    integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnT9ljN3JJw=" crossorigin="anonymous">

  <!-- Bootstrap Table -->
  <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css">

  <!-- Fonts & Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css"
    integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css"
    integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

  <!-- Code Syntax Highlighting -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media=""
    id="highlight_theme_light">



  <!-- Styles -->

  <link rel="shortcut icon"
    href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;">

  <link rel="stylesheet" href="/gsoc2025-Nikhil_Gupta/assets/css/main.css">
  <link rel="canonical" href="http://localhost:4000/gsoc2025-Nikhil_Gupta/blog/2025/week-4/">

  <!-- Dark Mode -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none"
    id="highlight_theme_dark">

  <script src="/gsoc2025-Nikhil_Gupta/assets/js/theme.js"></script>
  <script src="/gsoc2025-Nikhil_Gupta/assets/js/dark_mode.js"></script>


</head>

<!-- Body -->

<body class="fixed-top-nav ">

  <!-- Header -->
  <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
      <div class="container">
        <a class="navbar-brand title font-weight-lighter" href="/gsoc2025-Nikhil_Gupta/">Nikhil Gupta | JdeRobot x
          GSoC2025</a>
        <!-- Navbar Toggle -->
        <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar top-bar"></span>
          <span class="icon-bar middle-bar"></span>
          <span class="icon-bar bottom-bar"></span>
        </button>

        <div class="collapse navbar-collapse text-right" id="navbarNav">
          <ul class="navbar-nav ml-auto flex-nowrap">

            <!-- About -->
            <li class="nav-item ">
              <a class="nav-link" href="/gsoc2025-Nikhil_Gupta/">home</a>
            </li>

            <!-- Blog -->
            <li class="nav-item active">
              <a class="nav-link" href="/gsoc2025-Nikhil_Gupta/blog/">blog<span class="sr-only">(current)</span></a>
            </li>

            <!-- Other pages -->
            <li class="nav-item ">
              <a class="nav-link" href="/gsoc2025-Nikhil_Gupta/about/">about</a>
            </li>

            <!-- Toogle theme mode -->
            <li class="toggle-container">
              <button id="light-toggle" title="Change theme">
                <i class="fas fa-moon"></i>
                <i class="fas fa-sun"></i>
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Scrolling Progress Bar -->
    <progress id="progress" value="0">
      <div class="progress-container">
        <span class="progress-bar"></span>
      </div>
    </progress>
  </header>


  <!-- Content -->
  <div class="container mt-5">

    <!-- _layouts/post.html -->

    <div class="post">

      <header class="post-header">
        <h1 class="post-title">Week 4: June 23 ~ June 30</h1>
        <p class="post-meta">June 30, 2025</p>
        <p class="post-tags">
          <a href="/gsoc2025-Nikhil_Gupta/blog/2025"> <i class="fas fa-calendar fa-sm"></i> 2025 </a>
          ·
          <a href="/gsoc2025-Nikhil_Gupta/blog/tag/jderobot">
            <i class="fas fa-hashtag fa-sm"></i> JdeRobot</a>
          <!-- <a href="/gsoc2025-Nikhil_Gupta/blog/tag/ackermann">
            <i class="fas fa-hashtag fa-sm"></i> Ackermann</a> -->
          <a href="/gsoc2025-Nikhil_Gupta/blog/tag/worldmigration">
            <i class="fas fa-hashtag fa-sm"></i> WorldMigration</a>
          <a href="/gsoc2025-Nikhil_Gupta/blog/tag/autoparking">
            <i class="fas fa-hashtag fa-sm"></i> AutoParking</a>

          ·
          <a href="/gsoc2025-Nikhil_Gupta/blog/category/weeklyupdates">
            <i class="fas fa-tag fa-sm"></i> WeeklyUpdates</a>
          <a href="/gsoc2025-Nikhil_Gupta/blog/category/coding">
            <i class="fas fa-tag fa-sm"></i> Coding</a>


        </p>
      </header>

      <article class="post-content">

        
        <div id="markdown-content">
          <p>Week 4 of the GSoC coding period was all about polishing our earlier migrations and digging deeper into the auto-parking scenario. After smoothing out minor glitches in the obstacle-avoidance world and the FollowLine exercise, I turned my attention to migrating the bateria_prius_3laser.world and the accompanying prius_ackermann_3laser model. While the world file is now loading in Gazebo Harmonic, I'm still chasing down a few static objects that didn't make it in—and parked cars are tripping over collision-geometry errors.</p>

          <h2 id="preliminaries">Preliminaries</h2>
          <p>At the end of Week 3 we had a working obstacle world, a basic auto-parking stub, and an optimized Ackermann plugin. Before tackling new migrations, I revisited the obstacle-avoidance world and the FollowLine exercise to ensure they remained stable under our latest Gazebo Harmonic updates.</p>

          <h2 id="objectives">Objectives</h2>
          <ul class="task-list">
            <li class="task-list-item">
              <input type="checkbox" class="task-list-item-checkbox" disabled checked> Refine the simple_obstacle_world for consistency
            </li>
            <li class="task-list-item">
              <input type="checkbox" class="task-list-item-checkbox" disabled checked> Fix remaining issues in the FollowLine exercise
            </li>
            <li class="task-list-item">
              <input type="checkbox" class="task-list-item-checkbox" disabled checked> Migrate Worlds/bateria_prius_3laser.world to SDF 1.8
            </li>
            <li class="task-list-item">
              <input type="checkbox" class="task-list-item-checkbox" disabled> Migrate the CustomRobots/ackermann_cars/models/prius_ackermann_3laser model
            </li>
            <li class="task-list-item">
              <input type="checkbox" class="task-list-item-checkbox" disabled> Identify and resolve missing objects and collision-geometry errors
            </li>
          </ul>

          <h2 id="execution">Execution</h2>

          <h3 id="obstacle-avoidance">Obstacle Avoidance World Refinement</h3>
          <p>The week began with polishing our existing migrations to ensure they remained stable and consistent with our latest Gazebo Harmonic updates.</p>

          <p><strong>Refinement Tasks:</strong></p>
          <ul>
            <li>Corrected a mismatched collision tag on one of the dummy cars</li>
            <li>Harmonized lighting and ground-plane material settings</li>
            <li>Verified obstacle positions still line up with our path tests</li>
          </ul>
          <div class="image-container">
              <div class="placeholder-image">
                Obstacle Avoidance World - Refined Version
                <img src="https://theroboticsclub.github.io/gsoc2025-Nikhil_Gupta/assets/img/image.png" width="800">
                <br><small>Screenshot showing corrected collision tags and harmonized lighting</small>
              </div>
              <div class="image-caption">
                Obstacle avoidance world running smoothly in Gazebo Harmonic with refined collision detection and improved lighting
              </div>
          </div>

          <h3 id="followline-fixes">FollowLine Exercise Fixes</h3>
          <p>The FollowLine exercise required several updates to maintain compatibility with our latest migration patterns and ensure smooth operation in both Classic and Harmonic environments.</p>

          <p><strong>Update Components:</strong></p>
          <ul>
            <li>Updated topic remappings for the new /cmd_vel interface</li>
            <li>Removed deprecated plugin references</li>
            <li>Confirmed the robot follows the line in both classic and harmonic launches</li>
          </ul>

          <h3 id="autoparking-world">Auto-Parking World Migration</h3>
          <p>The major focus of Week 4 was tackling the complex auto-parking scenario migration, which represents a significant step up in complexity from our previous work.</p>

          <p><strong>World Structure Conversion:</strong></p>
          <ul>
            <li>Converted bateria_prius_3laser.world to SDF 1.8: updated physics, lighting, and scene definitions</li>
            <li>Ensured ground plane and road markings render correctly in Harmonic</li>
            <li>Spun up the world—static scenery loads, but a handful of props (curbs, signs) are still missing</li>
          </ul>

          <h3 id="prius-model-migration">Prius Ackermann 3-Laser Model Migration</h3>
          <p>The Prius model migration involved updating a sophisticated vehicle model with multiple laser sensors and advanced control systems.</p>

          <p><strong>Model Updates:</strong></p>
          <ul>
            <li>Updated the model's SDF: bumped version, modernized &lt;visual&gt; / &lt;collision&gt; tags, and attached three laser sensors</li>
            <li>Applied our AckermannSteering plugin configuration (as in Week 2)</li>
            <li>World launches without fatal errors, but the parked-car instances refuse to load due to invalid collision geometry</li>
          </ul>

          <h2 id="challenges">Challenges and Solutions</h2>

          <h3 id="missing-objects">Missing Objects in World</h3>
          <p>One of the significant challenges encountered was that some scene elements weren't appearing in the migrated world.</p>

          <p><strong>Root Cause:</strong></p>
          <ul>
            <li>Some scene elements weren't appearing because their &lt;include&gt; URIs pointed to Classic-style paths</li>
          </ul>

          <p><strong>Solution:</strong></p>
          <ul>
            <li>Switched to model:// URIs, verified file names, and re-exported the missing meshes</li>
          </ul>

          <h3 id="collision-geometry">Parked Cars Collision Geometry Errors</h3>
          <p>The most complex challenge was resolving collision geometry issues with the parked car models.</p>

          <p><strong>Issue Encountered:</strong></p>
          <ul>
            <li>Gazebo Harmonic rejects several parked-car collision meshes with messages about "unsupported geometry type"</li>
          </ul>

          <!-- <p><strong>Solution Strategy:</strong></p>
          <ul>
            <li>Converted those meshes to simple convex hulls (via Blender export)</li>
            <li>Updated &lt;collision&gt;&lt;mesh&gt; blocks</li>
            <li>Re-scaled appropriately for proper physics simulation</li>
          </ul> -->

          <h2 id="technical-insights">Technical Insights and Learnings</h2>

          <h3 id="migration-patterns">Migration Pattern Insights</h3>
          <p>Week 4 revealed several important insights about managing complex world migrations:</p>

          <ul>
            <li><strong>Include paths matter:</strong> Even a single wrong URI can silently drop an entire model</li>
            <li><strong>Collision simplification:</strong> Complex meshes often need convex-hull fallbacks for Harmonic compatibility</li>
            <li><strong>Incremental validation:</strong> Spawning one model at a time helps isolate failures quickly</li>
          </ul>

          <h3 id="workflow-optimization">Workflow Optimization</h3>
          <p>The migration work highlighted the importance of systematic approaches:</p>

          <ul>
            <li><strong>Component-by-component imports:</strong> Prevent "everything fails at once" scenarios</li>
            <li><strong>Automated URI checks:</strong> Can catch missing assets before launch</li>
            <li><strong>Mesh pre-processing scripts:</strong> Save time when converting large numbers of collision files</li>
          </ul>

          <h2 id="next-steps">Next Steps and Week 5 Focus</h2>

          <p><strong>1. Complete Auto-Parking Migration</strong></p>
          <ul>
            <li>Finish importing all static props into the auto-parking world</li>
            <li>Resolve the remaining collision geometry errors on the parked-car models</li>
            <li>Run end-to-end parking maneuvers to validate sensor and plugin integrations</li>
          </ul>

          <p><strong>2. Performance Analysis</strong></p>
          <ul>
            <li>Begin performance benchmarking to compare Classic vs. Harmonic for this scenario</li>
            <li>Optimize resource usage for complex multi-sensor simulations</li>
            <li>Validate real-time performance requirements</li>
          </ul>

          <p><strong>3. Integration Testing</strong></p>
          <ul>
            <li>Test sensor data integration with ROS2 navigation stack</li>
            <li>Validate multi-laser sensor coordination</li>
            <li>Ensure proper coordinate frame relationships</li>
          </ul>

          <h2 id="reflection">Reflection and Forward Look</h2>
          <p>Week 4 was a reality check: migrating full simulation scenarios exposes deeper file-organization and geometry challenges than single models. That said, each hurdle teaches us how to build more robust migration tooling—and sets us up to finalize the auto-parking world in Week 5.</p>

          <p>The progression from simple model migrations to complex world scenarios continues to reveal new layers of complexity in the Gazebo migration process. However, the systematic approach we've developed and the lessons learned from each challenge are building a solid foundation for comprehensive migration solutions.</p>

          <p><strong>Key Takeaways:</strong></p>
          <ul>
            <li>Verify every &lt;include&gt; and &lt;mesh&gt; URI in your world file</li>
            <li>Simplify collision meshes early—complex geometry rarely survives an SDF version bump</li>
            <li>Keep your branch history tidy: small, focused commits make rollbacks painless</li>
            <li>Incremental testing prevents cascading failures in complex scenarios</li>
          </ul>

          <p>Looking ahead to Week 5, I'm excited to complete the auto-parking migration and begin comprehensive performance analysis. The foundation we've built over the past four weeks positions us well for delivering robust, production-ready migration solutions that the robotics community can rely on.</p>

          <p>I'm looking forward to wrapping up the auto-parking migration next week and turning our attention to comprehensive testing and performance tuning!</p>
        <!-- </div>> -->

          <p>Looking ahead to Week 4, I'm excited to tackle the remaining auto-parking challenges and establish our migration work as a comprehensive solution for the robotics community. The foundation built over the first three weeks positions us well for accelerated progress and expanding impact.</p>

          <p>The journey from basic model migration to optimized world scenarios showcases the potential of systematic, well-tested migration approaches. I look forward to continuing this momentum and delivering robust, high-quality migration solutions!</p>
        </div>
      </article>




      <br>
      <hr>
      <br>
      <ul class="list-disc pl-8"></ul>

    </div>

  </div>  <!-- Footer -->
  <footer class="fixed-bottom">
    <div class="container mt-0">
      © Copyright 2025 JdeRobot x Google Summer of Code 2025. Powered by <a href="https://jekyllrb.com/" target="_blank"
        rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio"
        rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a
        href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>.

    </div>
  </footer>

  <!-- JavaScripts -->
  <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js"
    integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

  <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"
    integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/gsoc2025-Nikhil_Gupta/assets/js/masonry.js" type="text/javascript"></script>

  <!-- Medium Zoom JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js"
    integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyU1Qew4P8=" crossorigin="anonymous"></script>
  <script defer src="/gsoc2025-Nikhil_Gupta/assets/js/zoom.js"></script>

  <!-- Bootstrap Table -->
  <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script>

  <!-- Load Common JS -->
  <script src="/gsoc2025-Nikhil_Gupta/assets/js/no_defer.js"></script>
  <script defer src="/gsoc2025-Nikhil_Gupta/assets/js/common.js"></script>
  <script defer src="/gsoc2025-Nikhil_Gupta/assets/js/copy_code.js" type="text/javascript"></script>


  <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>
  <script async src="https://badge.dimensions.ai/badge.js"></script>

  <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script"
    src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>




  <!-- Scrolling Progress Bar -->
  <script type="text/javascript">
    /*
     * This JavaScript code has been adapted from the article 
     * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
     * published on the website https://css-tricks.com on the 7th of May, 2014.
     * Couple of changes were made to the original code to make it compatible 
     * with the `al-foio` theme.
     */
    const progressBar = $("#progress");
    /*
     * We set up the bar after all elements are done loading.
     * In some cases, if the images in the page are larger than the intended
     * size they'll have on the page, they'll be resized via CSS to accomodate
     * the desired size. This mistake, however, breaks the computations as the
     * scroll size is computed as soon as the elements finish loading.
     * To account for this, a minimal delay was introduced before computing the
     * values.
     */
    window.onload = function () {
      setTimeout(progressBarSetup, 50);
    };
    /*
     * We set up the bar according to the browser.
     * If the browser supports the progress element we use that.
     * Otherwise, we resize the bar thru CSS styling
     */
    function progressBarSetup() {
      if ("max" in document.createElement("progress")) {
        initializeProgressElement();
        $(document).on("scroll", function () {
          progressBar.attr({ value: getCurrentScrollPosition() });
        });
        $(window).on("resize", initializeProgressElement);
      } else {
        resizeProgressBar();
        $(document).on("scroll", resizeProgressBar);
        $(window).on("resize", resizeProgressBar);
      }
    }
    /*
     * The vertical scroll position is the same as the number of pixels that
     * are hidden from view above the scrollable area. Thus, a value > 0 is
     * how much the user has scrolled from the top
     */
    function getCurrentScrollPosition() {
      return $(window).scrollTop();
    }

    function initializeProgressElement() {
      let navbarHeight = $("#navbar").outerHeight(true);
      $("body").css({ "padding-top": navbarHeight });
      $("progress-container").css({ "padding-top": navbarHeight });
      progressBar.css({ top: navbarHeight });
      progressBar.attr({
        max: getDistanceToScroll(),
        value: getCurrentScrollPosition(),
      });
    }
    /*
     * The offset between the html document height and the browser viewport
     * height will be greater than zero if vertical scroll is possible.
     * This is the distance the user can scroll
     */
    function getDistanceToScroll() {
      return $(document).height() - $(window).height();
    }

    function resizeProgressBar() {
      progressBar.css({ width: getWidthPercentage() + "%" });
    }
    // The scroll ratio equals the percentage to resize the bar
    function getWidthPercentage() {
      return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
    }
  </script>

</body>

</html>